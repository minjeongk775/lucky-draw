async function selectWinner() {
    try {
        // ëœë¤ì„± ê°•í™”
        const shuffleArray = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        };

        // ì°¸ê°€ì ëª©ë¡ì„ ë°°ì—´ë¡œ ë³€í™˜ í›„ ì„ê¸°
        const participantArray = Object.entries(participants);
        const shuffledParticipants = shuffleArray(participantArray);
        
        // í˜„ì¬ ì‹œê°„ì„ ì‹œë“œë¡œ ì‚¬ìš©í•˜ì—¬ ì¶”ê°€ ëœë¤ì„± ë¶€ì—¬
        const seed = Date.now() % shuffledParticipants.length;
        const winnerIndex = Math.floor(Math.random() * seed * Math.random() * shuffledParticipants.length);
        const [winnerKey, winner] = shuffledParticipants[winnerIndex % shuffledParticipants.length];

        const winnerDisplay = document.getElementById('winner-display');
        winnerDisplay.innerHTML = `
            <div class="winner-title">ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</div>
            <div class="winner-name">${winner.name}</div>
            <div class="winner-id">${winner.empId}</div>
        `;

        createConfetti();

        await database.ref(`participants/${winnerKey}`).remove();
        isDrawing = false;

    } catch (error) {
        console.error('Error in selectWinner:', error);
        alert('ë‹¹ì²¨ì ì„ ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        isDrawing = false;
    }
}
